version: 2

models:
  - name: Question_Performance_Data
    description: "Aggregated KPIs by creation month; representative question id for FK sanity."
    meta:
      owner: Christopher Lewis
      domain: stack_overflow
      layer: semantic
      maturity: high

    columns:
      - name: creation_month
        tests: [not_null]
      - name: creation_year
      - name: creation_month_num
      - name: creation_quarter

      - name: sample_question_id
        description: "MIN(question_id) from the group."
        tests:
          - relationships:
              arguments:
                to: ref('Facts_Questions')
                field: question_id

      - name: distinct_count_of_question_id
      - name: distinct_count_of_asker_user_id
      - name: distinct_count_of_accepted_answer_id
      - name: distinct_count_of_answerer_id
      - name: distinct_count_of_answerer_user_id

      - name: sum_of_answer_count
      - name: sum_of_view_count
      - name: sum_of_favorite_count
      - name: comment_count_summed

      - name: questions_with_answers
      - name: questions_with_accepted
      - name: has_answers_rate
      - name: accepted_rate

      - name: tags_array
      - name: tags_csv
